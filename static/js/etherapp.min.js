var omniEvents={};_.extend(omniEvents,Backbone.Events);var ModelBaseMethods={};var CollectionBaseMethods={};var ViewBaseMethods={elementExists:function(a){return($(a).length>0)},baseListeners:function(){var a=this;a.listenTo(omniEvents,"idle-success",a.onIdleSuccess);a.listenTo(omniEvents,"idle-error",a.onIdleError);a.listenTo(omniEvents,"busy",a.onBusy);a.listenTo(omniEvents,"saving",a.onSaving);a.listenTo(a,"idle-success",a.onIdleSuccess);a.listenTo(a,"idle-error",a.onIdleError);a.listenTo(a,"busy",a.onBusy);a.listenTo(a,"saving",a.onSaving)},onBusy:function(){var a=this;a.loading()},onIdleSuccess:function(){var a=this;a.loaded()},onIdleError:function(){var a=this;a.loaded()},onHiddeElement:function(a){var c=this;omniEvents.trigger("Log","Escondendo Elemento: "+a);var b=c.$el.find(a);$(b).each(function(e,d){$(this).hide()})},onShowElement:function(a){var c=this;omniEvents.trigger("Log","Mostrando Elemento: "+a);var b=c.$el.find(a);$(b).each(function(e,d){$(this).show()})},onSaving:function(){var b=this;var a=b.$el.find(".saving");$(a).each(function(d,c){$(this).show()})},loading:function(){var b=this;var a=b.$el.find(".loading");$(a).each(function(d,c){$(this).show()});var a=b.$el.find(".updating");$(a).each(function(d,c){$(this).show()})},loaded:function(){var b=this;var a=b.$el.find(".loading");$(a).each(function(d,c){$(this).hide()});var a=b.$el.find(".saving");$(a).each(function(d,c){$(this).hide()});var a=b.$el.find(".updating");$(a).each(function(d,c){$(this).hide()})}};var ModelValidator=Backbone.Model.extend({required:[],minLength:3,validate:function(b,a){var d=this;var c=true;_.find(d.required,function(e){if(b[e].length<d.minLength){c=false;omniEvents.trigger("requiredField",e,d.minLength)}});if(!c){return"Error"}}});var EtherMainView=Backbone.View.extend({el:$("body"),debugMode:false,commitLap:0,isMasked:false,events:{"click .hello":"onHello","click .etherPageHide":"onetherPageHide"},initialize:function(b){var a=this;_.extend(this,b);_.extend(this,ViewBaseMethods);omniEvents.trigger("showMainLoader");a.listenTo(omniEvents,"showMainLoader",a.onShowMainLoader);a.listenTo(omniEvents,"hideMainLoader",a.onHideMainLoader);a.listenTo(omniEvents,"showBody",a.onShowBody);if(!Backbone.History.started){Backbone.history.start({pushState:true,hashChange:false})}omniEvents.trigger("showBody");omniEvents.trigger("hideMainLoader")},onetherPageHide:function(){var a=this},onShowBody:function(){$("#etherBody").show()},onShowMainLoader:function(){var a=this;if(!a.isMasked){a.isMasked=true;a.onShowElement("#mainLoader")}else{omniEvents.trigger("Log","OmniLoader rodando")}},onHideMainLoader:function(){var a=this;a.isMasked=false;a.onHiddeElement("#mainLoader")},onShowHomeMask:function(){var a=this},onScrollToStep:_.debounce(function(c){var b="div#"+c;var a=$(b);if(a.length>0){omniEvents.trigger("Log","Movendo o passo: "+c);omniEvents.trigger("scrollToElement",a)}else{omniEvents.trigger("Log","Elemento nao existe: "+b)}},500),onShowComponent:function(a){var c=this;var b=c.$el.find(a);$(b).each(function(e,d){$(this).show();omniEvents.trigger("showNextStep")})},onHideComponent:function(a){var c=this;var b=c.$el.find(a);$(b).each(function(e,d){$(this).hide()})},onOmniAlert:function(b,a){$("#modalTitle").empty().html(b);$("#modalBody").empty().html(a);$("#omniModal").modal("show");_.delay(function(){$("#omniModal").modal("hide")},2000)},onSetTitle:function(a){document.title=a},onLog:function(b){var a=this;if(a.debugMode){console.log("Debug Message: "+b)}},onFieldRequired:function(a){omniEvents.trigger("Log","O campo: "+a+" requerido")},onPageNotFound:function(a){omniEvents.trigger("Log","Pagina nao encontrada: "+a)},onComponentNotFound:function(a){omniEvents.trigger("Log","Component not found: "+a)},onTemplateNotFound:function(a){omniEvents.trigger("Log","Template not found: "+a)},onShowLoading:function(){var a=this;a.loading()},onRequiredField:_.debounce(function(b){var a=this;msgs={city:{title:"O campo <b>nome da Cidade</b>  é necessário",msg:"Por favor, preencha o campo <b>nome da Cidade</b>"},state:{title:"O campo <b>nome do Estado</b>  é necessário",msg:"Por favor, preencha o campo <b>nome do Estado</b>"},zipCode:{title:"O campo <b>Cep</b>  é necessário",msg:"Por favor, preencha o campo <b>Cep</b>"},country:{title:"O campo <b>nome do Pais</b>  é necessário",msg:"Por favor, preencha o campo <b>nome do Pais</b>"},streetName:{title:"O campo <b>nome da rua</b>  é necessário",msg:"Por favor, preencha o campo <b>nome da rua</b>"},streetNumber:{title:"O campo número é necessário",msg:"Por favor, preencha o campo número"},assunto:{title:"O campo assunto é necessário",msg:"Por favor, preencha o campo assunto"},mensagem:{title:"O campo mensagem é necessário",msg:"<p>Por favor, preencha com a mensagem</p>"},customerName:{title:"O campo nome completo é necessário",msg:"Por favor, preencha o campo nome completo"},customerEmail:{title:"O email de contato é necessário",msg:"Por favor, preencha o campo email de contato"},accountName:{title:"O campo nome completo é necessário",msg:"Por favor, preencha o campo nome completo"},accountEmail:{title:"O email de contato é necessário",msg:"Por favor, preencha o campo email de contato"}};if(msgs[b]){$("#modalTitle").empty().html(msgs[b].title);$("#modalBody").empty().html(msgs[b].msg);$("#omniModal").modal("show")}else{omniEvents.trigger("Log","Nao tem campo requerido: "+b)}a.loaded()},100),loading:function(){omniEvents.trigger("busy");$("#home_loading").show()},loaded:function(){omniEvents.trigger("idle-success");$("#home_loading").hide()},onScrollToUp:function(a){$("html, body").animate({scrollTop:0},"slow")},onScrollToElement:function(a){$("html,body").animate({scrollTop:a.offset().top-90},"slow")},onScrollTo:function(c){var b=$(c.currentTarget).attr("itemid");if(b){var a=$(b);if(a){$("html,body").animate({scrollTop:a.offset().top-90},"slow")}}},onSendError:function(){var a=this;a.router.navigate("#contactSendError");a.router.showPages(["#page-mainContent","div#page-contactSendError"])},onSendSuccess:function(){var a=this;a.router.navigate("#contactSendSuccess");a.router.showPages(["#page-mainContent","div#page-sendSuccess"])},onSendMessage:function(){var d=this;d.loading();var a=$("#formcontactMe");var b=_.object(a.serializeArray().map(function(e){return[e.name,e.value]}));var c=new ContactModel(b);if(c.isValid()){c.save(b,{wait:true,success:function(g,e,f){omniEvents.trigger("setTitle","Mensagem enviada com sucesso");$(".form-control").each(function(h,i){$(this).val("")});omniEvents.trigger("sendSuccess")},error:function(g,e,f){omniEvents.trigger("sendError");d.loaded()}})}else{d.loaded()}}});